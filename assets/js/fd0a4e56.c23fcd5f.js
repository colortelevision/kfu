"use strict";(self.webpackChunkkfu=self.webpackChunkkfu||[]).push([[6992],{3026:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>d,frontMatter:()=>c,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"FFMPEG/more","title":"FFMPEG & SOX COMMAND EXAMPLES","description":"FRAME EXTRACTION AND MANIPULATION","source":"@site/docs/FFMPEG/more.md","sourceDirName":"FFMPEG","slug":"/FFMPEG/more","permalink":"/kfu/docs/FFMPEG/more","draft":false,"unlisted":false,"editUrl":"https://github.com/colortelevision/kfu/tree/main/docs/FFMPEG/more.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"CHEAT SHEET","permalink":"/kfu/docs/FFMPEG/TBO"},"next":{"title":"THE FAKE NEWS","permalink":"/kfu/docs/hello"}}');var i=s(4848),r=s(8453);const c={},t="FFMPEG & SOX COMMAND EXAMPLES",l={},p=[{value:"FRAME EXTRACTION AND MANIPULATION",id:"frame-extraction-and-manipulation",level:2},{value:"AUDIO MANIPULATION",id:"audio-manipulation",level:2},{value:"COMP AND CONVERSION",id:"comp-and-conversion",level:2},{value:"SCRIPTS",id:"scripts",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ffmpeg--sox-command-examples",children:"FFMPEG & SOX COMMAND EXAMPLES"})}),"\n",(0,i.jsx)(n.h2,{id:"frame-extraction-and-manipulation",children:"FRAME EXTRACTION AND MANIPULATION"}),"\n",(0,i.jsx)(n.p,{children:"COMBINE PNG\u2019S INTO A VIDEO AT 6 FPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -framerate 6 -i %04d.png -c:v libx264 -pix_fmt yuv420p output2.mp4\n"})}),"\n",(0,i.jsx)(n.p,{children:"EXTRACT PNG FRAMES FROM MP4 @ 6 FPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf "fps=6" output_%04d.png\n'})}),"\n",(0,i.jsx)(n.p,{children:"COMBINE PNG FRAMES INTO VIDEO AT 12 FPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -framerate 12 -i %04d.png -c:v libx264 -pix_fmt yuv420p out1put.mp4\n"})}),"\n",(0,i.jsx)(n.p,{children:"GENERATE PNG FRAMES FROM AN MP4 AT 6 FPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -vf fps=6 output_%03d.png\n"})}),"\n",(0,i.jsx)(n.p,{children:"COMBINE PNG FRAMES INTO GIF AT 12 FPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -framerate 6 -pattern_type glob -i '/volumes/x1/vids/ref/fightframes/*.png' -preset best -crf 0 output.gif\n"})}),"\n",(0,i.jsx)(n.p,{children:"IDENTIFY FPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffprobe -v error -select_streams v:0 -show_entries stream=r_frame_rate -of default=noprint_wrappers=1:nokey=1 input.mp4\n"})}),"\n",(0,i.jsx)(n.p,{children:"IDENTIFY FPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 2>&1 | grep "fps"\n'})}),"\n",(0,i.jsx)(n.p,{children:"EXTRACT FRAMES FROM A VIDEO"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf "fps=1" output%d.png\n'})}),"\n",(0,i.jsx)(n.p,{children:"##VIDEO FILTERS AND EFFECTS"}),"\n",(0,i.jsx)(n.p,{children:"CREATE VERTICAL VERSION"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -vf 'split[original][copy];[copy]scale=-1:ih*(16/9)*(16/9),crop=w=ih*9/16,gblur=sigma=20[blurred];[blurred][original]overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2' output.mp4\n"})}),"\n",(0,i.jsx)(n.p,{children:"EDGE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf "edgedetect" output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"CONTRAST"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf "eq=contrast=1.5:brightness=0.1" output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"INVERT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf lutrgb="r=negval:g=negval:b=negval" output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"FLIP VIDEO HORIZONTALLY"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf "hflip" output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"GAMEBOY FILTER"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -i custom_palette_256.png -filter_complex "eq=brightness=0.1:contrast=2:saturation=0,format=gray,unsharp=5:5:1.0,format=gbrp,paletteuse=dither=none" output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"SPEED 114%"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf "setpts=0.877*PTS" -c:a copy output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"VHS AESTHETIC WITH TEXTS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -vf \"curves=vintage,noise=alls=40:allf=t+u,eq=saturation=1.5:contrast=1.2,drawtext=text='textfile.txt':x=10:y=10:fontsize=24:fontcolor=white@0.6,drawtext=text='151121 01:19':x=10:y=h-40:fontsize=18:fontcolor=white@0.6,drawtext=text='TEXT':x=w-160:y=h-40:fontsize=18:fontcolor=white@0.6,drawbox=x=0:y=ih-1:w=iw:h=1:color=black@0.6,drawbox=x=iw-1:y=0:w=1:h=ih:color=black@0.6\" -c:v libx264 -crf 18 -c:a aac -strict experimental output.mp4\n"})}),"\n",(0,i.jsx)(n.h2,{id:"audio-manipulation",children:"AUDIO MANIPULATION"}),"\n",(0,i.jsx)(n.p,{children:"INCREASE VOLUME"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -af "volume=2.0" output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"LOWER PITCH BY ONE SEMITONE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sox input.mp3 output.mp3 pitch -100\n"})}),"\n",(0,i.jsx)(n.p,{children:"separate L & R"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sox input.wav output_left.wav remix 1\nsox input.wav output_right.wav remix 2\n"})}),"\n",(0,i.jsx)(n.p,{children:"REPLACE VIDEO\u2019S AUDIO W/ .MP3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i video3.mp4 -i music.mp3 -c:v copy -map 0:v:0 -map 1:a:0 -shortest video4.mp4\n"})}),"\n",(0,i.jsx)(n.p,{children:"REMOVE AUDIO"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -c:v copy -an output.mp4\n"})}),"\n",(0,i.jsx)(n.p,{children:"FLIP PHASE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -af "pan=stereo|c0=-1*c0|c1=-1*c1" output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"CLIPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -c copy -segment_time 17 -reset_timestamps 1 -f segment output%d.mp4\n"})}),"\n",(0,i.jsx)(n.h2,{id:"comp-and-conversion",children:"COMP AND CONVERSION"}),"\n",(0,i.jsx)(n.p,{children:".M4A TO .MP3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i input.m4a -c:a libmp3lame -q:a 2 output.mp3\n"})}),"\n",(0,i.jsx)(n.p,{children:"COMBINE IMAGE & AUDIO"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -loop 1 -i image.png -i audio.mp3 -vf "scale=ceil(iw/2)*2:ceil(ih/2)*2" -c:v libx264 -tune stillimage -c:a aac -b:a 192k -pix_fmt yuv420p -shortest output.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"CONVERT ALL .MP4\u2019S IN CURRENT DIRECTORY TO WAV AND OUTPUT TO \u2018./WAV\u2019 FOLDER"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'for file in ./*.mp4; do ffmpeg -i "$file" -acodec pcm_s16le -ar 44100 "./wav/$(basename "$file" .mp4).wav"; done\n'})}),"\n",(0,i.jsx)(n.p,{children:"PLACE .MP4 ONTO .PNG (VIDEO ON PORTRAIT IMAGE)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i video1.mp4 -i back.png -filter_complex "[0:v]scale=-1:720[video];[1:v][video]overlay=(W-w)/2:(H-h)/2" -c:a copy video2.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"PLACE IMAGE IN TOP RIGHT CORNER, FADES IN @ 0:00; FADES OUT @ 0:03"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i video2.mp4 -loop 1 -i icon.png -filter_complex "[1:v]fade=in:st=0:d=1,fade=out:st=3:d=1[ov];[0:v][ov]overlay=W-w-10:10:shortest=1" -pix_fmt yuv420p -c:a copy video3.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"LOOP GIF IN TOP LEFT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i video4.mp4 -ignore_loop 0 -i animation.gif -filter_complex "[1:v]scale=320:-1[ovrl], [0:v][ovrl]overlay=10:10" -pix_fmt yuv420p -c:a copy -t $(ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 video4.mp4) video5.mp4\n'})}),"\n",(0,i.jsx)(n.p,{children:"RESIZE ALL PNG\u2019S IN A FOLDER"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'for file in *.png; do\n    sips -z 1920 3412 "$file" --out "scaled_$file"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"scripts",children:"SCRIPTS"}),"\n",(0,i.jsx)(n.p,{children:"ENABLE SCRIPT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod +x script.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"RUN SCRIPTS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./script.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"SCRIPT FOR MOVING ALL PNG\u2019S IN A SET OF FOLDERS INTO ONE FOLDER AND RENAMING THEM 00X ASCENDING NUMBERS:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n\n# The directory where you want to move all the PNGs\ndestination_directory="destination_folder"\n\n# Ensure the destination directory exists\nmkdir -p "$destination_directory"\n\n# Counter for renaming\ncounter=1\n\n# Find all PNGs, sort them, and then process each one\nfind out_* -type f -name "*.png" | sort | while read -r file; do\n    # Construct the new filename\n    new_filename=$(printf "%04d.png" "$counter")\n\n    # Move and rename the file\n    mv "$file" "$destination_directory/$new_filename"\n\n    # Increment the counter\n    ((counter++))\ndone\n\n'})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var a=s(6540);const i={},r=a.createContext(i);function c(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);